---
import { SITE_TITLE } from "../consts";
import { menubar } from "../topMenu";
---

<header>
  <nav>
    <h2>
      <a href="/" class="top-link"
        ><img
          id="brand-image"
          src="/PV-JACL-logo.svg"
          alt="logo"
          width="40"
          height="40"
        /><span id="site-title">{SITE_TITLE}</span></a
      >
    </h2>
    <div class="internal-links">
      <ul class="menubar" role="menubar">
        {
          menubar.map((menuItem) => {
            return (
              <li
                class="menuItem"
                id={menuItem.id}
                role="menuitem"
                aria-haspopup={menuItem.isDropdown}
              >
                <a
                  tabindex={0}
                  href={menuItem.isDropdown ? null : menuItem.src}
                  class="top-link"
                >
                  {menuItem.label}{menuItem.isDropdown ? <img class="menu-icon" src="/downarrow.svg" alt="menu icon" /> : null}
								</a>
                  {!menuItem.isDropdown ? null : (
                    <ul class="submenu" role="menu">
                      {menuItem.children.map((menuItem) => {
                        return (
                          <li>
                            <a href={menuItem.src}>{menuItem.label}</a>
                          </li>
                        );
                      })}
                    </ul>
                  )}
              </li>
            );
          })
        }
      </ul>
    </div>
    <div class="social-links">
      <a href="https://www.facebook.com/puyallupvalleyjacl" target="_blank">
        <span class="sr-only">Go to Puyallup Valley JACL's Facebook page</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="40"
          height="40"
          viewBox="0 0 256 256"
          ><path
            fill="#1877F2"
            d="M256 128C256 57.308 198.692 0 128 0C57.308 0 0 57.308 0 128c0 63.888 46.808 116.843 108 126.445V165H75.5v-37H108V99.8c0-32.08 19.11-49.8 48.348-49.8C170.352 50 185 52.5 185 52.5V84h-16.14C152.959 84 148 93.867 148 103.99V128h35.5l-5.675 37H148v89.445c61.192-9.602 108-62.556 108-126.445"
          ></path><path
            fill="#FFF"
            d="m177.825 165l5.675-37H148v-24.01C148 93.866 152.959 84 168.86 84H185V52.5S170.352 50 156.347 50C127.11 50 108 67.72 108 99.8V128H75.5v37H108v89.445A128.959 128.959 0 0 0 128 256a128.9 128.9 0 0 0 20-1.555V165h29.825"
          ></path></svg
        >
      </a>
    </div>
  </nav>
</header>
<style lang="scss">
  header {
    margin: 0;
    padding: 0 1em;
    background: white;
    box-shadow: 0 2px 8px rgba(var(--black), 5%);
  }
  h2 {
    margin: 0;
    font-size: 1em;
  }

  h2 a,
  h2 a.active {
    text-decoration: none;
  }
  #brand-image {
    display: inline-block;
  }
  #site-title {
    display: inline-block;
    padding: 10px 0 0 8px;
    vertical-align: top;
  }
  nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .top-link {
    padding: 1em 0.5em;
    color: rgb(var(--gray));
    border-bottom: 4px solid transparent;
    text-decoration: none;
  }
  nav a.active {
    text-decoration: none;
    border-bottom-color: var(--accent);
  }
  ul.menubar {
    display: flex;
    justify-content: center;
    list-style: none;
    gap: 0.8rem;
    flex-wrap: wrap;
  }

  .menuItem a {
    text-decoration: none;
    font-weight: 700;
    color: rgb(var(--gray));
   }
  .menuItem a:hover {
    text-decoration: underline;
  }
  .menu-icon {
    padding-left:3px;
    width: 1rem;
  }
  ul.submenu:hover,
  .menuItem a:focus-within + ul.submenu {
    left: auto;
  }

  ul.submenu {
    left: -1000px;
    position: absolute;
    border: 1px solid white;
    background-color: rgb(var(--gray));
    padding: 0;
    z-index: 100;
    li {
      list-style: none;
      padding: 0.5rem;
      a {
        font-size: 1rem;
        text-decoration: none;
        font-weight: lighter;
        color: white !important;
      }
    }
  }

  .social-links,
  .social-links a {
    display: flex;
  }
  @media (max-width: 840px) {
    .social-links {
      display: none;
    }
    #site-title {
      display: none;
    }
    nav a {
      font-size: 1em;
    }
  }
</style>
